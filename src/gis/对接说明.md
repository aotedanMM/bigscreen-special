### 1 通用

#### 1.1 影响圈（烈度圈）

> 目录

```
/common/event/influence/InfluenceComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('influence');
```

> 方法说明

```
// 对外提供的方法说明

/**
* 调用烈度模型计算
*/
executeModel(){}

/**
* 请求并设置上报范围
* @param opts 参数
*/
fetchAndSetReportRanges(opts: any){}

/**
*  清除所有
**/
clear() {}

/**
* 设置上报的范围
* @param features
*/
setReportRanges(features: any) {}

/**
  * 加载
  * @param type 0 = 影响圈  1 = 模型服务烈度圈  2 = 上传烈度文件
  * @param noFitView 是否不调整视野，默认为false
  */
load(type: any = 0, noFitView: boolean = false) {}

/**
*  刷新影响圈(烈度圈)
* @param noFitView 是否不自动调整视野
**/
reload(noFitView: boolean = false) {}
```

> 事件说明

```
// 对外提供的事件说明
```

#### 1.2 事件定位

> 目录

```
/common/event/locate/LocateComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('locateComp');
```
> 方法说明
```
// 对外提供的方法说明
/**
* 加载(事件定位功能前端目前基本都是用的这个)
* @param opts
* @param opts.x
* @param opts.y
* @param opts.type
* @param opts.autoPan 是否调整视野，默认为true
* @param opts.changeZoom 是否缩放地图级别，默认为true
*/
load(opts: any) {}

/**
* 更新事件位置
* @param opts
* @param opts.x
* @param opts.y
* @param opts.changeZoom
*/
update(opts: any){}
```

> 事件说明
```
// 对外提供的事件说明
```

#### 1.3 余震

> 目录

```
/common/afterShock/AfterShockComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('afterShock');
```
> 方法说明
```
// 对外提供的方法说明

/**
* 加载余震数据
* @param shockData 余震数据
*/
load(shockData: any) {}

/**
* 打开弹窗
* @param id
*/
openPopup(id: string){}

/**
* 关闭弹窗
*/
closePopup(opts: any){}
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：popup
* 打开弹窗
* event {Object}
* event.type {string} 数据类型
* event.content {Object} 弹框对象
* event.content.id {string} 弹框对象id
* event.content.containerId {string} dom容器id
* event.content.tooltip {string} g2.widget.Tooltip
* event.data {Object} 元素数据对象
*/
const event: any ={
    type,
    content,
    data,
};
```
#### 1.4 GIS常用工具

> 目录

```
/common/tool/GISToolComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('gisToolComp');
```
> 方法说明
```
// 对外提供的方法说明

/**
 * 修改地图的宽高
 */
resize(){}

/**
 * 获取当前级别
 */
getCurrentLevel(){}

/**
 * 添加百度全景图层与按钮到地图
 */
addbdLayerCtol(){}

/**
 * 移除百度街景覆盖范围图层与按钮
 */
removebduLayerCtro(){}
/**
 * 添加腾讯全景图层与按钮到地图
 */
addtencentLayerCtol(){}

/**
 * 移除腾讯街景覆盖范围图层与按钮
 */
removetencentLayerCtro(){}
/**
 * 添加实时交通图层
 */
addTafficLayer(){}

/**
 * 移除实时交通图层
 */
removeTrfficLayer(){}

/**
 * 控制图层显隐
 * @param visible
 */
setTrafficLayerVisible(visible: boolean)

/**
 * 设置图层透明度
 * @param capacity
 */
setTrafficLayerCapacity(capacity: number)

/**
 * 获得鼠标位置组件
 */
getMousePositionComponent(){}

/**
 * 距离测量
 */
measureLength(){}

/**
 * 面积测量
 */
measureArea(){}

/**
 * 取消测量
 */
cancelMeasure(){}

/**
 * 清楚测量
 */
clearMeasure(){}

/**
 * 清屏
 */
clearAll(){}

/**
 * 截屏
 * @param domId {String} 要打印的domid，默认为地图容器
 */
screenShot(domId: any) {}

/**
 * 获取屏幕截图
 * @param domId {String} 要打印的domid，默认为地图容器
 */
getScreenShot(domId: any) {}

```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：levelChanged 
* 地图级别变化
* event {Object}
* event.level {Number} 地图当前级别
*/
const event: any ={
    level,
};

/**
* 事件名：mousePosition 
* 鼠标位置变化
* event {Object}
* event.x {Number} 鼠标所在位置经度
* event.y {Number} 鼠标所在位置纬度
*/
const event: any ={
    x,y
};

```
#### 1.5 统一交互处理

> 目录

```
/common/interact/CommonnteractComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('commonInteract');
```

> 方法说明
```
// 方法定义-列表滑过时调用
/**
* 添加高亮
* @param featureType  类型
* @param featureId 数据id
*/
addHover(featureType: any, featureId: string) {}

// 调用示例
// 灾情研判-救援队伍
// 灾情研判-资源featureType规则：  disaster_judge_resource__（固定前缀）+ RescueTeam※03（资源类型） + __ + 5（半径或者烈度名称，即level）
// 资源类型如['school', 'hospital', 'airport', 'portwharf','railwaystation', 'RescueTeam※03', 'hazardous', 'coalMine','mine', 'explosive', 'industry', 'reservoir', '_RealShip','nuclear', 'development', 'derivativerisk', 'disinfoper', 'emergencypart']
component.addHover('disaster_judge_resource__RescueTeam※03__5','beijing30');

// 灾情研判-行政区划-区县
component.addHover('district_point_county','4ed98d70-3a94-11e6-b33a-7d64ac10bb99');

// 灾情研判-行政区划-乡镇
component.addHover('district_point_town','42363');

// 灾情研判-指挥调度-北斗终端
// 灾情研判-指挥调度featureType规则：communicationEquiphcLayer0（前缀） + 1（类型，[1,2,3,4,5,6]）
component.addHover('communicationEquiphcLayer01','efb73f2d1feb9c51865e7e6067bde999');
// 清除
component.clearHover();


// 方法定义-视野调整到弹出框
/**
* 调整详情框视野
* @param opts
* @param opts.id {String} id 弹出框ID
*/
panPopup(opts: any) {}
// 示例
component.panPopup({id:'popup_EventPoints'});

/**
 * 清除提示
 */
clearHover(){}

/**
 * 获取图例数据
 */
getLegends(){}
```
> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：legend-change
* 图例变化
* event {Object}
* event.list {Array} 图例数组
*/
const event: any ={
    list,
};
```
#### 1.6 资源分析

> 目录

```
/common/resourceanalysis/ResourceAnalysisCmponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('resourceAnalysis');
```
> 方法说明
```
// 对外提供的方法说明
/**
 * 加载数据
 * @param datalist {Array} 数据列表
 * @param datalist[i].codeKey {string} 标识
 * @param datalist[i].data {Array} 业务数据列表
 */
addPointsOnMap(datalist: any){}

/**
 * 增加弹框
 * @param data {Object} 业务数据
 * @param coordinate {Array} 坐标数组
 */
addPopup(data: any, coordinate: any){}

/**
 * 关闭弹框
 */
closePopup(){}

/**
 * 清除弹出框
 */
clearPopup(){}

/**
 * 绘制点
 * @param distance {number} 距离，单位千米，默认50
 * @param callback {function} 回调函数
 */
DrawPoint(distance: number = 50, callback: any){}

/**
 * 根据事件点生成缓冲区
 * @param distance {number} 距离，单位千米，默认50
 * @param element {Object} 要素对象
 * @param callback {function} 回调函数
 */
pointBuffer(distance: number = 50, callback: any){}

/**
 * 绘制线
 * @param distance {number} 距离，单位千米，默认50
 * @param callback {function} 回调函数
 */
DrawPolyline(distance: number = 50, callback: any){}

/**
 * 绘制面
 * @param distance {number} 距离，单位千米，默认50
 * @param callback {function} 回调函数
 */
DrawPolygon(distance: number = 50, callback: any){}

/**
 * 监听点击事件
 * @param callback {function} 回调函数
 */
clickListener(callback: any){}

/**
 * 移除监听事件
 */
removeClickListen(){}

/**
 * 取消激活
 */
deactivateDrawUtil(){}

/**
 * 定位
 * @param geojson {Object} geojson对象
 */
location(geojson: any)(){}
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：ResourcePointsPopup
* 打开弹框
* event {Object}
* event.data {Object} 数据对象
* event.containerId {string} dom容器id
* event.id {string} id
*/
const event: any ={
    data,
    containerId,
    id,
};
```
#### 1.7 地形地貌三维地图

> 目录

```
/common/map3d/Map3D.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('map3d');
```
> 方法说明
```
// 对外提供的方法说明
/**
 * 添加地形图层
 * @param layerName {string} 图层名称
 * @param addToMap {boolean} 是否加载到地图，默认为true
 */
addTerrianLayer(layerName: string, addToMap: boolean = true){}

/**
 * 移除地形图层
 * @param layerName {string} 图层名称
 */
removeTerrainLayer(layerName: string){}

/**
 * 切换到三维时，同步二维的视野
 */
syncronizeViewFrom2D(){}

/**
 * 切换到二维时，同步三维的视野
 */
syncronizeViewFrom3D(){}

/**
 * 初始化图层显示
 */
initLayerVisible(){}

/**
 * 添加事件点标注
 */
addEventMarker(){}

/**
 * 清除事件点标注
 */
clearEventMarker(){}

/**
 * 定位事件点标注
 */
locateEvent(){}

/**
 * 获取高程
 */
getAltitude(){}
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：mousePosition
* 打开弹框
* event {Object}
* event.x {number} 经度
* event.y {number} 纬度
* event.z {number} 高程
*/
const event: any ={
    x,
    y,
    z,
};
```
#### 1.8 物资列表点击

> 目录

```
/common/listClick/ListClickCmponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('listClick');
```
> 方法说明
```
// 对外提供的方法说明
/**
 * 加载数据
 * @param data 业务数据 
 * @param codeKey {string} 类型标适
 */
addPointsOnMap(data: any, codeKey: any){}
/**
 * 增加弹框
 * @param data {Object} 业务数据
 * @param coordinate {Array} 坐标数组
 * @param noneMouseClick {boolean} 是否鼠标点击
 */
addPopup(data: any, coordinate: any, noneMouseClick: any = true)

/**
 * 关闭弹框
 */
closePopup(){}

/**
* 清除弹出框
*/
clearPopup(){}

/**
 * 清除所有图层
 */
clearAllResourceLayer(){}

/**
 * 清除一个图层
 * @param codeKey {string} 类型标适
 */
clearOneLayer(codeKey: string){}

/**
 * 定位
 * @param geojson {Object} geojson对象
 */
location(geojson: any){}
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：ReposityPopup
* 打开弹框
* event {Object}
* event.type {string} 类型
* event.data {Object} 业务数据 
* event.containerId {string} dom容器id
* event.id {string} id
*/
const event: any ={
    type,
    data,
    containerId,
    id,
};
```
#### 1.9 当地天气

> 目录

```
/common/weather/WeatherComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('Weather');
```
> 方法说明
```
// 对外提供的方法说明

/**
 * 展示天气
 */
load(){}

/**
 * 清除天气
 */
unload(){}

  const opt: any = {
            point,
            geometry: geojson,
        };
/**
 * 查询范围内各地天气
 * @param opts 
 * @param opts.point  中心点
 * @param opts.geojson  影响范围
 */
searchWeather(opts: any){}


```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：popup
* 打开弹框
* event {Object}
* event.type {string} 类型
* event.data {Object} 业务数据 
* event.containerId {string} dom容器id
*/
const event: any ={
    type: 'localWeather',
    data,
    content: {
        containerId: '',
    },
};
```
#### 1.10 搜索

> 目录

```
/common/query/search/SearchComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('search');
```
> 方法说明
```
// 对外提供的方法说明
/**
 * 根据code查询地区
 * @param code {string} 行政区划编码
 */
queryDistrict(code: string){}

/**
 * 设置当前缓冲区半径
 * @param radius {number} 半径
 */
setRadius(radius: number)

/**
 * 根据输入坐标，定位点，查询地址
 * @param opts {Object}
 * @param opts.x {Object}
 * @param opts.y {Object}
 */
queryPoint(opts: any)

/**
 * 创建点
 * @param coords {Object} 坐标对象
 * @param coords.x {number} 经度
 * @param coords.y {number} 纬度
 * @param symbol {Object} 符号对象
 */
createPoint(coords: any, symbol: any){}

/**
 * 定位到信息点并弹框显示信息
 * @param opts
 * @param opts.x {number} x
 * @param opts.y {number} y
 * @param opts.geometry {object} geojson对象
 * @param type {string} 类型：point，polygon，wkt
 */
locateGeometry(opts: any, type: string){}

/**
 * 逆地理编码
 * @param coords {Array} 坐标数组
 */
geocodePoint(coords: any){}

/**
 * 开始标绘
 * @param type {string} 类型：point, polyline, polygon
 */
startPlot(type: string){}

/**
 * 绘制线缓冲
 * @param wkt {string} wkt
 */
drawBufferPolyline(wkt: any){}

/**
 * 绘制点缓冲
 * @param coords {Object}
 * @param coords.x {Object} 经度
 * @param coords.y {Object} 纬度
 */
drawBufferPoint(coords: any){}

/**
 * 获取缓冲几何对象
 */
getBufferGeom(){}

/**
 * 查询资源
 */
queryResouece(){}

/**
 * 移除行政区划结果
 * @param code {String} 可选 不填的时候清除全部
 */
clearDistrict(code: string)

/**
 * 清除
 */
clear(){}

/**
 * 清除线
 */
clearLine(){}

/**
 * 清除缓冲
 */
clearBuffer(){}

/**
 * 全部清除
 */
clearAll(){}
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：searchComponentMapInfo
* 地图信息
* event {Object}
* event.text {string} 信息
*/
const event: any ={
    text: '请输入国内陆地经纬度'
};

/**
* 事件名：searchPointAddress
* 点查询地址
* event {Object}
* event.address  {string} 地址
* event.coords  {Object} 坐标对象
* event.coords.x  {number} 经度
* event.address.y  {number} 纬度
*/
const event: any ={
    address,
    coords,
};

/**
* 事件名：searchComponentRadiusChange
* 缓冲半径变更
* event {Object}
* event.r  {number} 半径
*/
const event: any ={
    r,
};

/**
* 事件名：searchComponentQueryResource
* 查询结果
* event {Object}
* event.type  {string} 类型
* [event.buffer]  {object} 缓冲几何对象
* [event.districtCode]  {string} 行政区划
*/
const event: any = {
    type: 'buffer',
    buffer,
    districtCode,
};
```

#### 1.11 一键搜-资源查询

> 目录

```
/common/query/resources/QueryResourceComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('queryResource');
```
> 方法说明
```
// 对外提供的方法说明

/**
   * 加载数据
   * @param options.TYPE {String} 大类，如'yujing'或'chengzaiti'或'yingjiziyuan'（预警信息，承灾体，应急资源）
   * @param options.type {String} 类型，如：'11B11'或'floodteam'
   * @param options.geoFilter {Boolean} 是否有几何筛选条件
   * @param options.opts {Object} 查询条件
   * @param options.opts.data {Array} 大部分情况下传数据
   * @param options.opts.geometry {Object} 几何信息（人口热力的情况下）
   * @param options.opts.districtcode {Object} 行政区划（房屋结构的情况下）
*/
addData(options: any) {}
/**
* 清除单类数据
*
*
*/
clearByType(type: string) {}
/*
* 清除所有资源查询数据
*/
clearData() {}

// geojson 转 wkt
geojsonToWkt(geojson: any) {}

// 合并面数据
unionGeometry(arr: any) {}

// 定位预警点
locateToYujingPoint(item: any) {}

// 定位资源点
locateToCYPoint(item: any, type: any) {}

// 清除所有弹窗
closePopup() {}

```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：housePopup
* 房屋弹窗
* event {Object}
*/
const event: any = {
                type,
                content,
                data: attributeObj,
                renderData: this.renderData,
            };

/**
* 事件名：popup_FireCarPoints
* 车辆弹窗
* event {Object}
*/

 const event: any = {
                type: 'fireCar',
                data,
                containerId: content.containerId,
                id: content.containerId,
            };

/**
* 事件名：ClusterDistribute_popupEvent
* 资源弹窗
* event {Object}
*/
 {
                    type,
                    isEventBtn : true,
                    data,
                    content,
                }

/**
* 事件名：carTrackMoveEvent
* 车辆移动事件
* event {Object}
* event.per  {number}
const event: any = {
    per
};

```

#### 1.12 交通情况

> 目录

```
/common/traffic/TrafficStatusCmponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('trafficStatus');
```
> 方法说明
```
// 对外提供的方法说明

/**
 * 定位、弹出详情框
 * @param index  道路的索引号，从0开始
 */
locate(index: any){}

/**
 * 关闭详情框
 */
closePopup(){}
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：popup
* 打开弹框
* event {Object}
* event.type  {string} 类型
* event.content {Object} 弹框对象
* event.content.id {string} 弹框对象id
* event.content.containerId {string} dom容器id
* event.content.tooltip {string} g2.widget.Tooltip
* event.data {Object} 元素数据对象
*/
const event: any = {
    type,
    content,
    data,
};
```
#### 1.13 路径规划
##### 1.13.1 简单路径规划（救援救助中复用）
> 目录
```
/common/routeplan/SimpleRouterPlanComponent.ts
```
> 前端调用

```
simpleRouter.addRoute({startPoint:[116,39],endPoint:[117,30],id: 'router001'});//添加一个路径
simpleRouter.removeRoute('router001');// 移除一个路径
simpleRouter.clear();// 清空所有
```
> 方法说明
```
// 对外提供的方法说明
/**
 * @param opts
 * @param opts.id 唯一标识
 * @param opts.startPoint [x ,y] 起点
 * @param opts.endPoint [x ,y] 终点
 * @param opts.strategy
 * @param opts.showStartPoint {Boolean}
 * @param opts.showEndPoint {Boolean}
 */
addRoute(opts: any){}

/**
 * @param id 唯一标识
 */
removeRoute(id: any){}

/**
 * 清除所有
 */
clear(){}
```

> 事件说明
```
// 对外提供的事件说明

```

##### 1.13.2 路径规划
> 目录

```
/common/routeplan/RouterPlanComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('routerPlan');
```
> 方法说明
```
// 对外提供的方法说明

/**
 * 创建服务
 * @param {String} className 服务名称
 * @param {Object} opts 服务参数
 */
createService(className: any, opts: any){}

/**
 * 查询驾车路径
 * @param opts
 * @param opts.clickMoreState {boolean}
 * @param opts.style
 * @param opts.stops {Object} 经过的点
 * @param opts.stops[i].lon {number} 经度
 * @param opts.stops[i].lat {number} 纬度
 * @returns {Promise<any>}
 */
queryPath(opts: any){}

/**
 * 查询骑行路径
 * @param opts
 * @param opts.clickMoreState {boolean}
 * @param opts.style
 * @param opts.stops {Object} 经过的点
 * @param opts.stops[i].lon {number} 经度
 * @param opts.stops[i].lat {number} 纬度
 * @returns {Promise<any>}
 */
queryPath_riding(opts: any){}

/**
 * 查询步行路径
 * @param opts
 * @param opts.clickMoreState {boolean}
 * @param opts.style
 * @param opts.stops {Object} 经过的点
 * @param opts.stops[i].lon {number} 经度
 * @param opts.stops[i].lat {number} 纬度
 * @returns {Promise<any>}
 */
queryPath_walking(opts: any){}

/**
 * 查询公交路径
 * @param opts
 * @param opts.clickMoreState {boolean}
 * @param opts.strategy_incity 市内公交换乘策略：0 推荐,1 少换乘.2 少步行.3 不坐地铁,4 时间短,5 地铁优先
 * @param opts.strategy_intercity 跨域公交换乘策略：0 时间短，1 出发早，2 价格低
 * @param opts.Trans_type_intercity 跨城交通方式策略：0 火车优先，1 飞机优先，2 大巴优先
 * @param opts.stops {Object} 经过的点
 * @param opts.stops[i].lon {number} 经度
 * @param opts.stops[i].lat {number} 纬度
 * @returns {Promise<any>}
 */
queryPath_bus(opts: any){}

/**
 * 解析公交结果显示在地图上
 * @param result {Object} 结果对象
 * @param result.routes {Array} 线路列表 
 * @param num {integer} 索引
 */
showRoute_bus(result: any, num: any){}

/**
 * 显示指定公交路线
 * @param steps {Array} 经停数组
 * @param steps[i].schemes {Array}
 */
showBusRoute(steps: any){}

/**
 * 高亮指定线路
 * @param path {Object} 线路几何对象
 */
highlightBusRouteScheme(path: any){}

/**
 * 查询poi
 * @param opts {Object} 
 * @param opts.keyword {string} 关键字
 * @param opts.page {integer} 当前页
 * @param opts.page_size {integer} 单页条数
 */
queryPoi(opts: any){}

/**
 * 查询点
 * @param item {Object}
 * @param item.lon {number} 经度
 * @param item.lat {number} 纬度
 * @param type {integer} 类型
 */
queryPoint(item: any, type: any){}

/**
 * 开启地图选点
 * @param data {object}
 * @param data.position {integer} 位置
 * @param data.iconClass {string} 图标类
 */
startSelectPoint(data: any){}

/**
 *增加终点
 * @param data {object}
 * @param data.t {object}
 * @param data.t.position {integer} 位置
 * @param data.t.iconClass {string} 图标类
 */
addEndPoint(data: any){}

/**
 * 去除中间点
 */
removeMidPoints(){}

/**
 * 添加起点/途经点/终点
 * @param data
 * @param data.location
 * @param data.location.lon {number} 经度
 * @param data.location.lat {number} 纬度
 * @param data.iconClass {string} 图标类
 * @param data.position {integer} 位置
 * 
 */
addPoint(data: any){}

/**
 *逆向地理编码
* @param params
* @param params.x
* @param params.y
*/
request2(params: any){}

/**
 * @param dataList {Array} 数据列表
 * @param dataList[i] {Object} 数据
 * @param dataList[i].location
 * @param dataList[i].location.lon {number} 经度
 * @param dataList[i].location.lat {number} 纬度
 * @param dataList[i].iconClass {string} 图标类
 * @param dataList[i].position {integer} 位置
 */
reversePoints(dataList: any){}

/**
 * 定位到指定线路
 * @param schemes {Array} 路径数据
 */
showBusRouteSchemes(schemes: any){}

/**
 * 清除地图所有弹窗
 */
clearPopup()

/**
 * 清除路线结果
 */
clearRouteResults()

/**
 * 清除地图显示的路径
 */
clearResults()

/**
 * 移除
 */
remove(){}

/**
 * 移除起点/途经点/终点
 * @param data {Object}
 * @param data.iconClass {string} 图标类
 * @param data.position {integer} 位置
 */
removePoint(data: any){}

/**
 * 清除
 */
clear(){}
```

> 事件说明
```
// 对外提供的事件说明
/**
* 事件名：dealPathMainDatasStart
* 起点绘制
* event {Object}
* event.address  {string} 地址
* event.location {Object} 
* event.location.lon {number} 经度
* event.location.lat {number} 纬度
* event.position {integer} 位置
* event.iconClass {string} 图标类
*/
const event: any = {
    address,
    location,
    position,
    iconClass,
};

/**
* 事件名：dealPathMainDatasEnd
* 终点绘制
* event {Object}
* event.address  {string} 地址
* event.location {Object} 
* event.location.lon {number} 经度
* event.location.lat {number} 纬度
* event.position {integer} 位置
* event.iconClass {string} 图标类
*/
const event: any = {
    address,
    location,
    position,
    iconClass,
};

/**
* 事件名：dealPathMainDatasMiddle
* 中间点绘制
* event {Object}
* event.address  {string} 地址
* event.location {Object} 
* event.location.lon {number} 经度
* event.location.lat {number} 纬度
* event.position {integer} 位置
* event.iconClass {string} 图标类
*/
const event: any = {
    address,
    location,
    position,
    iconClass,
};

/**
* 事件名：querypathPopupOpen
* 中间点绘制
* event {Object}
* event.data {Object} 路径数据
* event.content {Object} 
* event.content.containerId {string} 容器id
*/
const event: any = {
    data,
    content,
};

```
#### 1.14 最新影像

> 目录

```
/common/latestimage/LatestImageComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('latestImage');
```

> 方法说明
```
// 对外提供的方法说明
/**
 * 加载图层
 * @param id {string} id
 */
addLayer(id: any){}

/**
 * 移除图层
 * @param id {string} id
 */
removeLayer(id: any){}

/**
 * 设置图层可见
 * @param id {string} id
 * @param visible {boolean} 是否可见
 */
setVisible(id: any , visible: boolean){}

/**
 * 清除所有的影像图层
 */
removeAll(){}
```

> 事件说明
```
// 对外提供的事件说明

```
#### 1.15 周边查询

> 目录

```
/common/nearby/NearQueryComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('nearQuery');
```

> 方法说明
```
// 对外提供的方法说明

/**
 * 设置当前缓冲的要素对象
 * @param featureInfo {Object}
 * @param featureInfo.type  类型标识，提供详情框使用
 * @param featureInfo.featureType 要素类型
 * @param featureInfo.data
 * @param featureInfo.symbol
 */
setTargetFeature(featureInfo: any){}

/**
 * 关闭弹框
 */
closePopup(){}
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：popup
* 打开弹框
* event {Object}
* event.type  {string} 类型标识，提供详情框使用
* event.featureType  {string} 要素类型
* event.content {Object} 弹框对象
* event.content.id {string} 弹框对象id
* event.content.containerId {string} dom容器id
* event.content.tooltip {string} g2.widget.Tooltip
* event.data {Object} 元素数据对象
* event.hideButtons {boolean} 
*/
const event: any = {
    type,
    featureType,
    content,
    data,
    hideButtons: true,
};
```

#### 1.16 地图打印

> 目录

```
/common/mapPrint/MapPrintComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('mapPrint');
```

> 方法说明
```
// 对外提供的方法说明

/**
 * @param opts {Object}
 * @param opts.dpi {number} dpi
 * @param opts.layout {string} 布局名称
 * @param opts.producer {string} 制图人
 * @param opts.unit {string} 制图单位
 * @param opts.title {string} 标题
 * @param opts.extent {Array} 四至数组
 * @param opts.outputFormat {string} 导出格式
 * @param opts.mapDownLevel {integer} 地图级别
 * @param callback {function} 回调
 */
print(opts: any, callback: any) 
```

> 事件说明
```
// 对外提供的事件说明

/**
* 事件名：progress
* 打印中
* event {Object}
*/
const event: any = {};

/**
* 事件名：finish
* 打印完成
* event {Object}
*/
const event: any = {};

/**
* 事件名：error
* 打印错误
* event {Object}
*/
const event: any = {};
```
#### 1.17 实时车辆

> 目录

```
/common/query/resources/FireCarHistory/FireCarHistoryCmponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('fireCarHistory');
```
> 方法说明
```
// 对外提供的方法说明

/**
     * 加载车辆数据
     * @param data any
     */
    addPoint(data: any) {}
/**
 * 清除所有
 */
unload(){}

/**
 * 清除所有
 */
openPopup(id: any) {}

// 关闭弹窗
closePopup() {}

//定位
locate(coordinate: any) {}

```
> 事件说明
```
//
/**
* 事件名：popup_FireCarPoints
* 车辆弹窗
* event {Object}
*/

 const event: any = {
                type: 'fireCar',
                data,
                containerId: content.containerId,
                id: content.containerId,
            };

```

#### 1.18 历史轨迹

> 目录

```
/common/historyTrack/HistoryTrackComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('historyTrack');
```
> 方法说明
```
// 对外提供的方法说明
/**
* 注册播放的图标符号
* @param symbolKey 符号key
* @param symbol 符号参数
* @param symbol.source {String}
* @param symbol.width: {number}
* @param symbol.height: {number}
* @param symbol.offsetX: {number}
* @param symbol.offsetY: {number}
* @param symbol.opacity: {number}
* @param symbol.size: {number}
 */
registSymbol(symbolKey: any, symbol: any){}

/**
* 加载
* @param data {Object} 轨迹数据
* @param data.longitude 经度
* @param data.latitude 纬度
* @param data.speed 速度
* @param data.time 时间字段，默认识别time,可自定义指定
* @param [symbolObj] {Object} 符号，非必填
* @param symbolObj.source {String}
* @param symbolObj.width: {number}
* @param symbolObj.height: {number}
* @param symbolObj.offsetX: {number}
* @param symbolObj.offsetY: {number}
* @param symbolObj.opacity: {number}
* @param symbolObj.size: {number}
* @param timeField {String} 时间字段，默认time
*/
load(data: any, symbolObj: any, timeField: any = 'time'){}

/**
* 播放
* @param data {Object} 轨迹数据
* @param data.longitude 经度
* @param data.latitude 纬度
* @param data.speed 速度
* @param data.time 时间字段，默认识别time,可自定义指定
*/
play(data: any){}

/**
 * 暂停
 */
pause(){}

/**
 * 结束
 */
finish()
```

> 事件说明
```

// 对外提供的事件说明

/**
* 事件名：carTrackMoveEvent
* 车辆移动事件
* event {Object}
* event.per  {number}
const event: any = {
    per
};

/**
* 事件名：finish
* 播放完成
* event {Object}
const event: any = {};
```

#### 1.19 降水预报

> 目录

```
common/rainForecast/RainForecastComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('rainForecast');
```

> 方法说明

```
// 对外提供的方法说明
// 加载24 小时
component.load(0);
// 加载36 小时
component.load(1);
// 加载72 小时
component.load(2);
// 卸载
component.unload();

```

#### 1.20 卫星云图

> 目录

```
common/satilliteCloud/SatilliteCloudComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('satilliteCloud');
```

> 方法说明

```
// 对外提供的方法说明
// 加载
component.load();
// 卸载
component.unload();

```
> 事件说明

```

```
#### 1.21 图层接入

> 目录

```
common/mapserviceIn/MapserviceInComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.commonFactory.getComponent('mapserviceIn');
```

> 方法说明

```
// 对外提供的方法说明
// 图层id： 水系图层 WaterLayer 风图层 WindLayer
/**
  * 添加图层
  * @param id {String} 必填
  * @param params {Object} 可选
  */
addLayer(id: any, params: any) {}
/**
  * 移除图层
  * @param id {String}
  */
removeLayer(id: any) {}

/**
  * 控制显隐
  * @param id {String}
  * @param visible {Boolean}
  */
setVisible(id: any, visible: boolean) {}

/**
  * 移除所有图层
  */
clear() {}

```
> 事件说明

```
#### 1.22 图层管理

> 目录

```
/common/layermanager/LayerManagerComponent.ts
```
> 前端调用

```
const gisModules = this.$ioc.resolve('GISFactory-map');
const component = gisModules.commonFactory.getComponent('layerManager');
```
> 方法说明
```
// 对外提供的方法说明

/**
* 设置图层显示隐藏
* @param layerId 图层id
* @param isVisible true:显示  false:隐藏
*/
setLayerShow(layerId: any, isVisible: any)
```

/**
* 图层管理初始化
*/
load() {}
```
>图层说明
```
//对外提供的图层说明

/**
* 图层数组列表
* layerList {Array}
* id {string} 图层id
* name {String} 图层名称
* visible {Boolean}} 图层状态 true:显示  false:隐藏
*/
const layerList: any ={
    id,
    name,
    visible,
};
```

### 2 常态

#### 2.1 事件预警信息

> 目录	

```
/normal/eventwarninfor/EventWarnInforComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.normalFactory.getComponent('eventWarnInfor');
```

> 方法说明

```
// 对外提供的方法说明

// 地图上叠加数据 线一移植
addResource(data: any) {}

/**
     * 隐藏对应级别的数据
     * @param levelArr 烈度级别数组
     */
    hideResource(levelArr: any[]) {}

// 定位预警事件
locateEvent(opts: any) {}

/**
     *
     * @param data
     * @param coordinate
     * @param noneMouseClick 是否非地图点击触发，点击地图触发时不居中定位；点击列表触发时，不设置弹出框autoPan
     */
addPopup(data: any, coordinate: any, noneMouseClick: any = true) {}

// 清除所有
clearAll() {}

/**
     * 清除弹出框
     */
    clearPopup() {}
    closePopup() {}

// 隐藏高亮
    hideHighlight() {}

// 卸载
unload() {}

```
> 事件说明
```
//
/**
* 事件名：EventPointspopup
* 预警信息弹窗
* event {Object}
*/

 const event: any = {
                data,
                containerId: content.containerId,
                id: content.containerId,
            };

```

#### 2.2 历史事件

> 目录

```
/normal/historyEvent/QueryAndShowAccidentData.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.normalFactory.getComponent('queryAndShowAccident');
```

> 方法说明

```
//添加事件数据
addAccidentDataToMap(eventOps: any) {}

//删除类型数据
removeAccidentdata(type: string) {}


// 定位
locateAccidentdata(type: string) {}


```

> 事件说明

```
/**
* 事件名：AccidentPopup
* 事件信息弹窗
* event {Object}
*/

 const event: any = {
                            data: data[0].element, // data[0].element.attributeSet.find('title').value,
                            data_: attrObj,
                            containerId: content.containerId,
                        };

```

#### 2.3 事件定位

> 目录

```
/normal/newsevent/NewsEventLocateComponnet.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.normalFactory.getComponent('newsEventLocate');
```
> 方法说明
```
// 对外提供的方法说明
//图层显隐控制
setVisible(visible: any) {}

//关闭弹窗
closePopup() {}

//清除
clear() {}

/**
     * 显示事件
     * @param eventList
     */
showEvents(eventList: any) {}


/**
* 定位事件
     * @param opts
     * @param opts.eventType
     * @param opts.longitude
     * @param opts.latitude
     */
locateEvent(opts: any) {}


```

> 事件说明

```
/**
* 事件名：EventPointspopup
* 事件信息弹窗
* event {Object}
*/

 const event: any = {
                            data,
                            containerId
                        };

```

#### 2.4 应急资源

> 目录

```
/normal/resource/ResourceComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.normalFactory.getComponent('ResourceComponent');
```

> 方法说明
```
// 对外提供的方法说明
/**
   * 显示对应级别的数据
   * @param idarr 资源id
   */
showResource(idarr: string) {}

/**
   * 隐藏对应级别的数据
   * @param idarr 资源id
   */
hideResource(idarr: string[]) {}

/**
   * 显示对应级别的数据
   * @param key 类型code
   */
  getListData(key: string) {}

/**
   * 定位、弹出框架、高亮
   * @param id
   * @param noneMouseClick 是否非地图点击触发，点击地图触发时不居中定位；
   */
locationCenter(key: string, id: string, noneMouseClick: any = true) {}


/**
   * 清除弹出框
   */
  clearPopup() {}


```

> 事件说明

```
/**
* 事件名：popup
* 事件信息弹窗
* event {Object}
*/

 const event: any = {
                data,
                content,
                type: this.key,
              };

/**
* 事件名：listdata
* 列表数据
* event {Object}
*/

 const event: any = {
                data
              };         


/**
* 事件名：data-loaded
* 数据加载完成
* event {Object}
*/

 const event: any = {
                key
              };   

```

### 3 灾情研判

#### 3.1 行政区划

> 目录

```
/disasterJudge/district/DisasterJudgeDistrictComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.disasterJudgeFactory.getComponent('districtComp');
```

> 方法说明
```
// 对外提供的方法说明
/**
     * 以震中位中心点，查询20KM范围内的乡镇和50KM范围内的区县
     * @param x : 震中经度
     * @param y : 震中纬度
     * @param radius : 范围半径
     * @param id : id
     */
addBufferLayer(x: any, y: any, radius: any, id: any) {}

// 设置半径
setRadius(radiusArr: any) {}

/**
     * 切换乡镇点
     * @param visible 是否显示
     */
    toggleTownLayer(visible: boolean) {}

/**
     * 切换区县点
     * @param visible 是否显示
     */
    toggleCountyLayer(visible: boolean) {}


// 图层控制 显示隐藏
    toggleLayer(type: string, visible: boolean) {}

/**
     * 定位到信息点并弹框显示信息
     * @param type {String} 'County' 区县, 'Town' 城镇
     * @param id {String}
     */
    openPopup(type: any, id: any) {}

 // 关闭信息框
    closePopup() {}
// 清除所有图层数据以及关闭框
    clearAll() {}

```

> 事件说明

```
/**
* 事件名：Pointspopup
* 信息弹窗
* event {Object}
*/
const event: any = {
                type,
                content,
                data: attributeObj,
            };

/**
* 事件名：disasterDist
* 获取到缓冲数据
* event {Object}
*/

 const event: any = {
                    town: self.administrativeTowns,
                    county: self.administrativeCountys,
                };         


/**
* 事件名：disasterXZDist
* 展示点数据完成
* event {Object}
*/

 const event: any = {
                xzTown: data.data,
            };   

```


#### 3.2 人口热力

> 目录

```
/disasterJudge/popup/DisasterJudgePopComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.disasterJudgeFactory.getComponent('disasterJudgePop');
```

> 方法说明
```
// 对外提供的方法说明

/**
   * 加载
   * @param levelArr 勾选的级别列表
   */
  load(levelArr: any) {}

/**
 * 卸载
 */
unload(){}
```

> 事件说明

```

```


#### 3.3 资源

> 目录

```
/disasterJudge/resoure/DisasterJudgeResourceComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.disasterJudgeFactory.getComponent('disasterJudgeResource');
```
> 方法说明
```
// 对外提供的方法说明

/**
    * 加载数据
    * @param typeArr
  */
  load(typeArr: any) {}

/**
    * 显示对应级别的数据
    * @param type 资源类型
    * @param levelArr
   */
  showResource(type: any, levelArr: string[]) {}

/**
    * 隐藏对应级别的数据
    * @param type 资源类型
    * @param levelArr
  */
  hideResource(type: any, levelArr: string[]) {}

//清除
clear() {}
```
> 事件说明

``` 
/**
* 事件名：popup
* 信息弹窗
* event {Object}
*/
const event: any = {
          featureType,
          type: this._getTypeByFeatureType(featureType),
          data: attrObj,
          content,
        }

```

#### 3.4 船舶

> 目录

```
/disasterJudge/resoure/DisasterJudgeShipComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.disasterJudgeFactory.getComponent('disasterJudgeShip');
```
> 方法说明
```
// 对外提供的方法说明

/**
  * 加载数据
  * @param typeArr
  */
  load(typeArr: any) {}

```
> 事件名

``` 

```

#### 3.5 指挥调度

> 目录

```
/disasterJudge/commandDispatch/CommandDispatch.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.disasterJudgeFactory.getComponent('commandDispatch');
```
> 方法说明
```
// 对外提供的方法说明

/**
    * 获取设备数据
    * @param opts.point [Array]
    * @param opts.radius [Number] 单位千米
   */
  fitToExtent(opts: any) {}

/**
    * 新增图层
    * @param opts.type 业务类型类型标识
    * @param opts.list 数据列表
    * @param opts.autoPan {Boolean}
   */
  addResource(opts: any) {}

 /**
    * 移除图层
    * @param opts
   */
  removeResource(opts: any) {}

/**
    * 列表点击地图定位时调用
    * @param type 类型
    * @param field
    * @param value
   */
  locate(type: any, field: any, value: any) {}

  // 定位
  locateTerminaldata(type: string) {}
```
> 事件名

``` 
/**
* 事件名：mapclick
* 地图点击
* event {Object}
*/
const event: any = {
            data: attributeObj,
            type,
          }

```

#### 3.6 新力量调度

> 目录

```
/disasterJudge/resoure/DisasterJudgeNewTeamComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.disasterJudgeFactory.getComponent('disasterJudgeNewTeam');
```
> 方法说明
```
// 对外提供的方法说明

/**
    * 加载数据
    * @param typeArr
  */
  load(typeArr: any) {}

/**
    * 显示对应级别的数据
    * @param type 资源类型
    * @param levelArr
   */
  showResource(type: any, levelArr: string[]) {}

/**
    * 隐藏对应级别的数据
    * @param type 资源类型
    * @param levelArr
  */
  hideResource(type: any, levelArr: string[]) {}

//清除
clear() {}
```
> 事件说明

``` 
/**
* 事件名：popup
* 信息弹窗
* event {Object}
*/
const event: any = {
          featureType,
          type: this._getTypeByFeatureType(featureType),
          data: attrObj,
          content,
        }

```
### 

### 4 灾损统计

#### 4.1  灾损统计

> 目录

```
/disasterSta/sta/DisasterStaComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.disasterStaFactory.getComponent('disasterSta');
```
> 方法说明
```
// 对外提供的方法说明

/**
     * 加载数据
     * @param opts
     * @param opts.type
     * @param opts.list
     */
    load(opts: any) {}

// 界面按钮调用省行政区划点击
    provinceClick(code: any) {}

 // 界面按钮调用乡镇点事件点击
    districPointClick(code: any) {}

/**
     * 显示指定行政区划统计
     * @param opts
     * @param opts.code
     */
    showDistrict(opts: any) {}

  /**
     * 显示所有
     * @param opts
     */
    showAll(opts: any) {}

    /**
     * 清除所有
     */
    unload() {}

    // 关闭信息框
    closePopup() {}
```
> 事件说明

``` 
/**
    * 事件名：disasterSta_district_point_code
    * 分发事件，传送乡镇点编码
    * event {Object}
*/
const event: any = {
                code: element.id,
                type: this.options.pointType,
            }

/**
    * 事件名：disasterSta_district_code
    * 分发事件，传送行政区划编码
    * event {Object}
*/
const event: any = {
                code: provinceFeature.element.id,
                type: this.options.featureType,
            }

/**
*事件名：disasterSta_popup
*统计详情
*eventData {Object}
*/
const eventData: any = {
                featureType,
                // 当前的统计类型：、，区分人员、建筑等
                type: this.type,
                content,
                data,
};

```


### 5 救援救助

#### 5.1  救援队伍

> 目录

```
/rescueHelp/rescueTeam/RescueTeamInforComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('rescueTeamInfo');
```
> 方法说明
```
// 对外提供的方法说明
//清理所有
 unload() {}

/**
     * 新增图层
     * @param opts.districtCode 行政区划code
     * @param opts.resourceKey 救援队伍类型标识
     */
    addResource(opts: any) {}

// 移除图层
    removeResource(opts: any) {}

    // 清空救援队伍相关的图层
    clearAll() {}

 /**
     * 地图点击事件,触发显示弹窗
     * @param featureType
     * @param element
     */
    addPopup(featureType: any, element: any ) {}

// 清除弹窗
    closePopup() {}

  /**
    * 根据经纬度高亮
    * @param Type 类型
    * @param coordinate 经纬度数组
    */
    showHighlight(Type: string, coordinate: number[]) {}

    // 隐藏高亮
    hideHighlight() {}
```
> 事件名

``` 
/**
    * 事件名：popup
    * 弹窗
    * event {Object}
*/
const event: any = {
                    featureType,
                    type: this._getTypeByFeatureType(featureType),
                    data: attrObj,
                    content,
                }

```

#### 5.2  救援需求

> 目录

```
/rescueHelp/rescueNeed/RescueNeedComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('rescueNeed');
```
> 方法说明
```
// 对外提供的方法说明
/**
   * 加载
   * @param typeList 需求点数据集合 [{id: '',x: '', y: '', district: '',workers: []}]
   */
  load(typeList: any) {}

/**
   * 界面上点击需求点条目调用的方法，识别需求点，并查询所需救援队队伍数据
   * @param id 需求点唯一标识
   */
  needPointClick(id: any) {}

// 删除需求点
  removeNeedPoint() {}

    /**
  * 根据救援队类型添加,对应左侧菜单列表子项的勾选
  * @param typeCode 救援队伍类型编码
  */
  addRescureTeamByCode(typeCode: any) {}

 /**
   * 根据救援队类型删除,对应左侧菜单列表子项的反选
   * @param typeCode 救援队伍类型编码
  */
  removeRescureTeamByCode(typeCode: any) {}

/**
  * 界面右侧救援队条目信息点击事件调用方法，根据救援类队伍型编码识别救援队伍数据
  * @param id 救援队伍唯一标识id
  * @param typeCode 救援队伍类型编码
  */
  teamPointClick(id: any, typeCode: any) {}

  /**
  * 开启路径规划
  * @param routeId 救援队伍唯一id标识
  * @param typeCode 救援队类型
  */
  openRoutePlan(routeId: any, typeCode: any) {}

   /**
  * 关闭路径规划，界面上可以同时显示多个路径规划结果(通过id清除路径规划结果)
  * @param routeId 救援队伍唯一id标识
  */
  closeRoutePlan(routeId: any) {}

  // 关闭信息框
  closePopup() {}

  // 定位点
  fitPointLocation(x: any, y: any) {}

  /**
   * 卸载
   */
  unload() {}
```
> 事件说明

``` 
/**
    * 事件名：popup
    * 弹窗
    * event {Object}
*/
const event: any = {
        type: self.currentHlId + '_' + dataObj.typeCode,
        content,
        data: dataObj,
      }

      /**
    * 事件名：query_team_point
    * 需求点查询队伍
    * event {Object}
*/
const event: any = {
        id: needData.id,
        data: queryData,
      }

/**
    * 事件名：need_point
    * 点击需求点
    * event {Object}
*/
const event: any = {
        id: attributeObj.id,
      }

/**
    * 事件名：team_point
    * 点击救援队伍
    * event {Object}
*/
const event: any = {
        id: attributeObj.id,
        typeCode,
      }
/**
    * 事件名：need_route
    * 开启路径规划
    * event {Object}
*/
const event: any = {
        type: dataSource.id,
        routeData: dataSource.route,
      }

```

#### 5.3  调度部署

> 目录

```
/rescueHelp/teamDispatch/TeamDispatchComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('teamDispatch');
```
> 方法说明

```
// 对外提供的方法说明
 /**
  *添加队伍数据
  *@param code 队伍类型，0:现场队伍，1:赶赴队伍，2:待命队伍
  *@param pointList 队伍数据，数据格式为[{typeCode: 类型，data：数据}]
 */
  addTeam(code: any, pointList: any) {}

 // 移除队伍数据
  removeTeam() {}

/**
  *根据救援队类型添加数据
  *@param typeCode 救援队类型
  *@param pointList 队伍数据，数据格式为数组[]
  *@param code 队伍类型，0:现场队伍，1:赶赴队伍，2:待命队伍
 */
  // addTeamByTypeCode(typeCode: any, pointList: any, code: any) {
  addTeamByTypeCode(typeCode: any, code: any) {}

    /**
  *根据救援队类型删除数据
  *@param typeCode 救援队类型
  *@param code 队伍类型，0:现场队伍，1:赶赴队伍，2:待命队伍
  */
  removeTeamByTypeCode(typeCode: any, code: any) {}

 /**
   *卸载
   */
  unload() {}

/**
  *界面按钮调用救援队事件点击,根据id查找数据
  *@param id 数据中的id字段
  *@param typeCode 救援队类型
  */
  openPopup(id: any, typeCode: any) {}

   /**
  *开启路径规划
  *@param routeId 救援队伍唯一id标识
  *@param typeCode 救援队类型
  */
  openRoutePlan(routeId: any, typeCode: any) {}

   /**
  *关闭路径规划，界面上可以同时显示多个路径规划结果(通过id清除路径规划结果)
  *@param routeId 救援队伍唯一id标识
  */
  closeRoutePlan(routeId: any) {}

  // 关闭信息框
  closePopup() {}

  // 定位点
  fitPointLocation(x: any, y: any) {}

```

> 事件说明


``` 

/**
    * 事件名：team_popup
    * 弹窗
    * event {Object}
*/
const event: any = {
        type: layerId,
        content,
        data,
      }

      /**
    * 事件名：dispatch_team_point
    * 点击救援队伍
    * event {Object}
*/
const event: any = {
        id: attributeObj.id,
        typeCode,
      }


/**
    * 事件名：route
    * 开启路径规划
    * event {Object}
*/
const event: any = {
        type: dataSource.id,
        routeData: dataSource.route,
      }

```

#### 5.4  调派建议

> 目录

```
/rescueHelp/teamDispatchAdvice/TeamDispatchAdviceComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('teamDispatchAdvice');
```
> 方法说明

```
// 对外提供的方法说明
 // 地图添加队伍数据
  addTeamOnMap(team: any, batchNumber: number) {}

 // 地图移除队伍类型数据
  removeTeam(teamKey: any, batchNumber: number) {}

// 调整地图视野,在数据添加或移除完毕后调用
  fitMapView() {}

    // 按批次类型定位队伍数据
  locateTeam(teamKey: any, batchNumber: number) {}

 // 定位单一队伍数据
  locateSingleTeam(teamKey: any, batchNumber: number, id: any) {}

// 添加到事件点的路径规划
  addRoutePlan(teamKey: any, batchNumber: number, id: any) {}

   // 移除到事件点的路径规划
  removeRoutePlan(teamKey: any, batchNumber: number, id: any) {}

   // 清除所有路径规划
  clearRoutePlans() {}

  // 关闭信息框
  closePopup() {}
```

> 事件说明

``` 
/**
    * 事件名：firePopup_rescue_dispatch_advice
    * 弹窗
    * event {Object}
*/
const event: any = {
        data: attributeObj, // data[0].element.attributeSet.find('title').value,
        containerId: content.containerId,
        type: 'dispatchAdvice',
      }

    

```

#### 5.5  物资需求（无）

> 目录

```
/rescueHelp/materialNeed/MaterialNeedComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('materialNeed');
```


#### 5.6  物资调派（无）

> 目录

```
/rescueHelp/materialDispatch/MaterialDispatchComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('materialDispatch');
```

#### 5.7  人员安置

> 目录

```
/rescueHelp/peopleArrangement/PeopleArrangementComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('peopleArrangement');
```

> 方法说明

```
// 对外提供的方法说明
 /**
   *加载
   *@param opts
   *@param opts.list 推送的数据
   */
  load(opts: any) {}

 /**
   *打开区县弹框
   *@param id 区县id
   */
  openPopup(id: any) {}

// 关闭区县弹框,还原展示效果
  closePopup() {}

   // 根据行政区id定位指定的面
  locateSingleDistrict(id: string) {}

 // 高亮行政区划面
  highLightDistrict(districtId: string) {}

// 清除高亮显示的面
  clearDistrictHl() {}
```

> 事件说明

``` 
/**
    * 事件名：firePopup_rescue_people_arrangement
    * 弹窗
    * event {Object}
*/
const event: any = {
        data: attributeObj, // data[0].element.attributeSet.find('title').value,
        containerId: content.containerId,
      }

    

```


#### 5.8  调度态势

> 目录

```
/rescueHelp/rescueSituation/RescueSituationComponent.ts
```

> 前端调用	

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.rescueHelpFactory.getComponent('rescueSituation');
```

> 方法说明

```
// 对外提供的方法说明
 /**
   * 加载
   * @param type
   */
  load(type: any) {}

 // 删除点图层，弹窗等
  removePoint() {}

/**
 * 查询统计
 */
  queryStaticData() {}

   /**
   * 按查询集结队伍数据
   */
  queryAwaitData() {}

 /**
  * 界面右侧救援队条目信息点击事件调用方法，根据救援类队伍型编码识别救援队伍数据
  * @param id 救援队伍唯一标识id
  * @param typeCode 救援队伍类型编码
  */
  teamPointClick(id: any, typeCode: any) {}

/**
  * 开启路径规划
  * @param routeId 救援队伍唯一id标识
  * @param typeCode 救援队类型
  */
  openRoutePlan(routeId: any, typeCode: any) {}

/**
  * 关闭路径规划，界面上可以同时显示多个路径规划结果(通过id清除路径规划结果)
  * @param routeId 救援队伍唯一id标识
  */
  closeRoutePlan(routeId: any) {}

// 加载历史轨迹数据
openHistoryTrack(hisdata: any) {}

// 历史轨迹播放
historyPlay() {}

// 历史轨迹暂停
historyPause() {}

// 历史轨迹结束
historyFinish() {}

// 关闭信息框
  closePopup() {}

```

> 事件说明

``` 
/**
    * 事件名：listData
    * 获取集结队伍列表
    * event {Object}
*/
const event: any = []


/**
    * 事件名：staticData
    * 获取统计面板数据
    * event {Object}
*/
const event: any = []

/**
    * 事件名：situation_route
    * 路径规划数据
    * event {Object}
*/
const event: any = {
        type: dataSource.id,
        routeData: dataSource.route,
      }


/**
    * 事件名：popup
    * 弹窗
    * event {Object}
*/
const event: any = {
        type: self.currentHlId + '_' + dataObj.typeCode,
        content,
        data: dataObj,
      }

    

```


### 6 救援进展



### 7 一键搜索

### 8 监测预警
#### 8.1 台风路径

> 目录

```
/monitorWarning/typhoon/TyphoonComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.monitorWarningFactory.getComponent('typhoon');
```
> 方法说明
```
// 对外提供的方法说明
```

> 事件说明
```
// 对外提供的事件说明
```

#### 8.2 气象监测

> 目录

```
/monitorWarning/qixiang/QiXiangComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.monitorWarningFactory.getComponent('qiXiang');
```
> 方法说明
```
// 对外提供的方法说明
```

> 事件说明
```
// 对外提供的事件说明
```

### 9 防御准备
#### 9.1 人口转移

> 目录
```
/defensivePreparation/popupTransfer/PopupTransferComponent.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.defensivePreparationFactory.getComponent('popupTransfer');
```
> 方法说明
```
// 对外提供的方法说明
```

> 事件说明
```
// 对外提供的事件说明
```

### 10 监测预警
#### 10.1 监测预警首页

> 目录
```
src\gis\monitorWarning\windWaterRainWork\WindWaterRainWorkLayer.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.monitorWarningFactory.getComponent('WindWaterRainWorkLayer');
```
> 方法说明
```
// 对外提供的方法说明

// 添加风情报警的点位
addResource_Wind() {}

// 添加雨情报警的点位和泰森多边形
addResource_Rain() {}

// 添加水情报警的点位
addResource_Water() {}

// 移除某一个图层（rain, water, wind）
removeResource(type) {}

// 移除全部
removeAll() 

//关闭弹窗
closePopup() 
```

> 事件说明
```
// 对外提供的事件说明
/**
    * 事件名：WindWaterRainWork_popup
    * 弹窗
    * event {Object}
*/
const event: any = {
        
}

/**
    * 事件名：RainWindLengend
    * 图例显示
    * event {Object}
*/
const event: any = {
    type: 'rain', 
    visible: false
}
```

#### 10.2 监测预警-风雨水工情

> 目录
```
src\gis\monitorWarning\windWaterRainWork\WindWaterRainWork.ts
```

> 前端调用

```
const factory = this.$ioc.resolve('GISFactory-map');
const component = factory.monitorWarningFactory.getComponent('WindWaterRainWork');
```
> 方法说明
```
// 对外提供的方法说明

  /**
   * 获取风情站点列表
  * @param opts {Object}
  * @param [opts.keyWord] {string} 关键字
  * @param [opts.overThreshold] {boolean} 是否筛选超阈值站点，默认false（全部站点）
    */
addResource_Wind() {}

/**
   * 获取雨情站点列表
   * @param opts {Object}
   * @param [opts.keyWord] 关键字
   * @param [opts.level] 告警级别 rain: 暴雨告警; heavyRain: 大暴雨告警; superRain: 特大暴雨告警
   */
addResource_Rain() {}

/**
   * 获取水情站点列表
   * @param opts {Object}
   * @param [opts.keyWord] 关键字
   * @param [opts.type] 监测站类型 river: 河流监测站; reservoir: 水库监测站
   */
addResource_Water() {}

 /**
  * 获取工情站点列表
  * @param opts {Object}
  * @param [opts.type] 类型 tanta: 坍塌; dianpaizhan: 电排站; chuanzha: 船闸；shuidianzhan: 水电站，shuizha: 水闸，bundpitch：堤防
  * @param [opts.keyWord] 关键字
    */
addResource_Work() {}


// 移除某一个图层（rain, water, wind, work）
removeResource(type) {}

// 移除全部
removeAll() 

//关闭弹窗
closePopup() 

/**
* 列表点击地图定位时调用
* @param type 类型 | 风情：wind；|雨情：rain；|水情：water；|工情：work；|
* @param field 字段名称
* @param value 字段值
*/
locate(type, field, value){}
```

> 事件说明
```
// 对外提供的事件说明
/**
    * 事件名：WindWaterRainWork_popup
    * 弹窗
    * event {Object}
*/
const event: any = {
        
}

/**
    * 事件名：RainWindLengend
    * 图例显示
    * event {Object}
*/
const event: any = {
    type: 'rain', 
    visible: false
}
```
